<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.shinnosuke.infra.code.CodeDao">
	<!-- namespace = mapper 와 연결될 dao -->
	<!-- xml 에서 주석 단축키 : ctrl + shift + C -->

	<!-- resultMap : 결과를 담아줄 그으르읏 -->
	<resultMap type="com.shinnosuke.infra.code.CodeDto" id="resultMapObj"></resultMap>
	
	<select id="selectList" resultMap="resultMapObj">
		select
			a.seq
			,a.cd_Name
			,a.cd_UseNY
			,a.cd_Order
			,a.cd_Desc
			,a.cd_ReDate
			,a.cd_MoDate
			,a.cd_DelNY
			,a.CodeGroup_seq
		from
			Code a
		order by
			a.seq desc
	</select>
	
	<insert id="insert">
		insert into code(
    		 cd_Name       
			 ,cd_UseNY       
			 ,cd_Order       
			 ,cd_Desc           
			 ,cd_ReDate           
			 ,cd_MoDate       
			 ,cd_DelNY   
			 ,CodeGroup_seq	
		)values(
    		#{cd_Name}
    		,#{cd_UseNY}
    		,#{cd_Order}
    		,#{cd_Desc}
         	,now()
    		,now()
    		,0
			,#{CodeGroup_seq}			
		)
	</insert>
	
	<select id = "selectOne" resultMap="resultMapObj">
		select
			a.seq
			,a.cd_Name
			,a.cd_UseNY
			,a.cd_Order
			,a.cd_Desc
			,a.cd_ReDate
			,a.cd_MoDate
			,a.cd_DelNY
			,a.CodeGroup_seq	
		from
			Code a
		where 1 =1
			and a.seq = #{seq}		
	</select>
		
	<update id="update">
		update Code
		set
			cd_Name = #{cd_Name}
			,cd_UseNY = #{cd_UseNY}
			,cd_Order = #{cd_Order}
			,cd_Desc = #{cd_Desc}
			,cd_DelNY = #{cd_DelNY}
		where 1 = 1
			and seq = #{seq}
	</update>
	
	<select id="selectListCodeGroup" resultMap="resultMapObj">
		select
			a.seq as CodeGroup_seq
			,a.cg_Name
		from
			CodeGroup a
		where 1=1
			
	</select>
	
	<update id="uelete">
		update Code
		set
			cd_DelNY = #{cd_DelNY}
		where 1 = 1
			and seq = #{seq}
	</update>
	
	<delete id="delete">
		delete from code
		where 1=1
			and seq = #{seq}
	</delete>
	
</mapper>